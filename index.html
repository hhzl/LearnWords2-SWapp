<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Sample illustrating the use of Basic Service Worker.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>LearnWords2-SWapp</title>
    <script>
      // Add a global error event listener early on in the page load, to help ensure that browsers
      // which don't support specific functionality still end up displaying a meaningful message.

      window.addEventListener('error', function(error) {
        if (ChromeSamples && ChromeSamples.setStatus) {
          console.error(error);
          ChromeSamples.setStatus(error.message + ' (Your browser may not support this feature.)');
          error.preventDefault();
        }
      });
    </script>
    
    
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="styles.css">
    
  </head>
 
<body>
    
 <h1>LearnWords2 app</h1>
<h3>API demo</h3>
<p>

</p>
<p>
This app may be accessed off-line.
</p>


<section id="toolbar">
<a class="pure-button pure-button-primary" id="question">LW.question()</a>&nbsp;
<a class="pure-button" id="answer">LW.answer()</a>&nbsp;
<a class="pure-button pure-button-primary" id="moveFd">LW.moveQuestionForward()</a>&nbsp;
<a class="pure-button" id="moveBw">LW.moveQuestionBackwards()</a>
</section>


<section id="contentArea">
<div id="content"></div>
<div id="log"></div>
</section>


<script>

if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js');
}

</script>
    

<script src="wordlist-en-ge.js"></script>
<script src="LW.js"></script>



<script>

// setup of LearnWords2 box
var LW = new BoxOfQuestions(new LWdb('learnWords'));

if (LW.db.numberOfWords() == 0) {LW.db.loadWords(wordList)};



// Creation of GUI

LWgui = {

    initialize: function() {
        this.bindEvents();
    },


   bindEvents: function() {

       if (navigator.device==undefined) {// usage in a browser
             this.attachButtonEvents("click");
          } else { // usage in mobile device
             this.attachButtonEvents("touchend")
       };
    },

   attachButtonEvents(eventName) 
                   { console.log(this.question); 
                    document.querySelector("#question").addEventListener(eventName, this.question, false);
                    document.querySelector("#answer").addEventListener(eventName, this.answer, false);
                    document.querySelector("#moveFd").addEventListener(eventName, this.moveQuestionForward, false);
                    document.querySelector("#moveBw").addEventListener(eventName, this.moveQuestionBackwards, false);
                    this.display("log","button events" + eventName +" attached");
                   },

   

   question: function() {var q = LW.question());
                         if {q}
                           {LWgui.display("log",JSON.stringify(q);
                            LWgui.display("content", q.word )
                           } else
                           {LWgui.display("log","no more questions";
                            LWgui.display("content", "_" )
                         }
                   }, 

   answer: function() { LWgui.display("log","");
			LWgui.display("content",LW.answer() )
                   }, 

   moveQuestionForward: function() {LWgui.display("log","LW.moveQuestionForward()"); LW.moveQuestionForward()
                   }, 

   moveQuestionBackwards: function() {LWgui.display("log","LW.moveQuestionBackwards()"); LW.moveQuestionBackwards()
                   },

   display: function(id, content) {document.getElementById(id).innerHTML = content;}

};

LWgui.initialize();


/*
document.querySelector('accessById').addEventListener('click', function (ev) {
    "use strict";
    var targetNode = ev.target;
    if (targetNode.tagName.toLowerCase() === 'li') {
        console.log(targetNode.innerHTML);
        ev.preventDefault();
    }
}, false);
*/

</script> 
    
</body>
</html>

