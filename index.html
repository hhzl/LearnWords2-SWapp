<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Sample illustrating the use of Basic Service Worker.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>LearnWords2-SWapp</title>
    <script>
      // Add a global error event listener early on in the page load, to help ensure that browsers
      // which don't support specific functionality still end up displaying a meaningful message.

      window.addEventListener('error', function(error) {
        if (ChromeSamples && ChromeSamples.setStatus) {
          console.error(error);
          ChromeSamples.setStatus(error.message + ' (Your browser may not support this feature.)');
          error.preventDefault();
        }
      });
    </script>
    
    
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="styles.css">
    
  </head>
 
<body>
    
 <h1 id="title">LearnWords2 app</h1>

<div class="pure-menu pure-menu-horizontal">
  <!--        <a href="#" class="pure-menu-heading pure-menu-link">LW</a> -->
          <ul class="pure-menu-list">
              <li class="pure-menu-item"><a href="#" class="pure-menu-link" id="removeWords">lw.db.removeWords()</a></li>
              <li class="pure-menu-item"><a href="#" class="pure-menu-link" id="numberOfWords">lw.db.numberOfWords()</a></li>

          </ul>
</div>

<p>
API demo. This app may be accessed off-line. Version 8.
</p>





<section id="toolbar">
<a class="pure-button pure-button-primary" id="question">lw.question()</a>&nbsp;
<a class="pure-button" id="answer">lw.answer()</a>&nbsp;
<a class="pure-button pure-button-primary" id="moveFd">lw.moveQuestionForward()</a>&nbsp;
<a class="pure-button" id="moveBw">lw.moveQuestionBackwards()</a>
</section>


<section id="contentArea">
<div id="content"></div>
<div id="log"></div>
</section>







<script>

if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js');
}

</script>
    

<script src="wordlist-en-ge.js"></script>
<script src="LW.js"></script>



<script>
"use strict";

// setup of LearnWords2 box

var lw = LW.BoxOfQuestions(LW.LWdb('learnWords'));
		if (lw.db.numberOfWords() == 0) {
			lw.db.loadWords(wordList);
		}




// Creation of GUI

var LWgui = {

    initialize: function() {
        this.bindEvents();
    },


   bindEvents: function() {

       if (navigator.device==undefined) {// usage in a browser
             this.attachButtonEvents("click");
          } else { // usage in mobile device
             this.attachButtonEvents("touchend")
       };
    },

   attachButtonEvents(eventName) 
                   { console.log(this.question); 
                    document.querySelector("#question").addEventListener(eventName, this.question, false);
                    document.querySelector("#answer").addEventListener(eventName, this.answer, false);
                    document.querySelector("#moveFd").addEventListener(eventName, this.moveQuestionForward, false);
                    document.querySelector("#moveBw").addEventListener(eventName, this.moveQuestionBackwards, false);
                    document.querySelector("#removeWords").addEventListener(eventName, this.removeWords, false);
                    document.querySelector("#numberOfWords").addEventListener(eventName, this.numberOfWords, false);
                    this.display("log","button events" + eventName +" attached");
                   },

   
   question: function() {var q = lw.question();
                         if (q)
                           {LWgui.display("log",JSON.stringify(q));
                            LWgui.display("content", q.word );
                           } else
                           {LWgui.display("log","no more questions");
                            LWgui.display("content", "_" );
                         }
                   }, 


   answer: function() { LWgui.display("log","");
			LWgui.display("content",lw.answer() )
                   }, 

   moveQuestionForward: function() {LWgui.display("log","lw.moveQuestionForward()"); 
                                    lw.moveQuestionForward();
                                    LWgui.display("content",".");
                   }, 

   moveQuestionBackwards: function() {LWgui.display("log","lw.moveQuestionBackwards()"); lw.moveQuestionBackwards()
                   },

   removeWords: function() { LWgui.display("log","lw.db.removeWords()");
                        lw.db.removeWords();
			LWgui.display("content","" )
                   }, 

   numberOfWords: function() { LWgui.display("log","lw.db.numberOfWords()");
			LWgui.display("content",lw.db.numberOfWords() )
                   }, 
 

   display: function(id, content) {document.getElementById(id).innerHTML = content;}

};

LWgui.initialize();


/*
document.querySelector('accessById').addEventListener('click', function (ev) {
    "use strict";
    var targetNode = ev.target;
    if (targetNode.tagName.toLowerCase() === 'li') {
        console.log(targetNode.innerHTML);
        ev.preventDefault();
    }
}, false);
*/

</script> 
    
</body>
</html>

